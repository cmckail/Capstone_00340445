{"version":3,"sources":["services/auth-header.js","services/image.service.js","services/product.service.js","components/ProductPreview.js","common/useQuery.js","components/SearchBar.js","components/Marketplace.js"],"names":["authHeader","user","JSON","parse","localStorage","getItem","accessToken","uploadPhoto","selectedFile","a","body","FormData","set","append","axios","post","API_URL","updateProductInfo","productData","imageService","catch","err","console","error","data","image","stringify","put","username","headers","createProduct","merchant_id","id","createCheckoutSession","product","then","p","deleteProduct","delete","getProduct","get","searchProducts","query","ImgCardMedia","styled","CardMedia","margin","display","maxWidth","maxHeight","Text","Typography","textAlign","ProductPreview","history","useHistory","parseImage","sx","width","onClick","push","component","height","thumb","url","alt","name","gutterBottom","variant","color","deposit","useQuery","URLSearchParams","useLocation","search","SearchBar","onSearch","useState","value","setValue","handleSubmit","e","preventDefault","Paper","onSubmit","alignItems","InputBase","ml","flex","placeholder","inputProps","onChange","target","IconButton","Divider","m","orientation","Marketplace","products","setProducts","fetched","setFetched","location","useEffect","productService","Grid","container","spacing","item","xs","params","replace","pathname","toString","length","map","sm","md"],"mappings":"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","file":"static/js/14.2d7cd187.chunk.js","sourcesContent":["export default function authHeader() {\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n\n  if (user && user.accessToken) {\n    return { \"x-access-token\": user.accessToken };\n  } else {\n    return {};\n  }\n}\n","import axios from \"axios\"\n\nconst API_URL = \"https://api.imgbb.com/1/upload?key=15d70c0c49ab3173c703b923def2f200\"\n\n\nconst uploadPhoto = async (selectedFile) => {\n\n    let body = new FormData()\n    body.set('key', '15d70c0c49ab3173c703b923def2f200')\n    body.append('image', selectedFile)\n\n    return axios.post('https://api.imgbb.com/1/upload', body)\n\n};\n\nexport default {\n    uploadPhoto\n}\n","import axios from \"axios\";\nimport authHeader from \"./auth-header\";\nimport imageService from \"./image.service\";\n\n// const API_URL = \"http://localhost:8080/api/\";\nconst API_URL = \"https://tadoo-backend-p9hgk.ondigitalocean.app/api/\"\n\nexport const getProduct = (id) => {\n    return axios.get(`${API_URL}products/${id}`, { headers: authHeader() })\n        .then((p) => p.data)\n        .catch((err) => {\n            console.error('Error', err);\n            return err;\n        })\n}\n\nexport const searchProducts = (query) => {\n    return axios.get(`${API_URL}search/products?${query}`, { headers: authHeader() })\n        .then((p) => p.data)\n        .catch((err) => {\n            console.error('Error', err);\n            return err;\n        })\n}\n\nexport const deleteProduct = (id) => {\n    return axios.delete(`${API_URL}products/${id}`, { headers: authHeader() })\n}\n\nexport const updateProductInfo = async (productData) => {\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n\n    if (productData.selectedFile) {\n        const { data } = await imageService.uploadPhoto(productData.selectedFile)\n            .catch((err) => {\n                console.error('Error:', err);\n                return err;\n            });\n        productData = { ...productData, image: JSON.stringify(data.data, null, 4) }\n    }\n    delete productData['selectedFile']\n    return axios.put(`${API_URL}products/`, { ...productData, username: user.username }, { headers: authHeader() })\n}\n\nexport const createProduct = async (productData) => {\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n\n    if (productData.selectedFile) {\n        const { data } = await imageService.uploadPhoto(productData.selectedFile)\n            .catch((error) => {\n                console.error('Error:', error);\n                return error\n            });\n        productData = { ...productData, image: JSON.stringify(data.data, null, 4) }\n    }\n    delete productData['selectedFile']\n    return axios.post(`${API_URL}products/`, { ...productData, merchant_id: user.id }, { headers: authHeader() })\n}\n\nexport const createCheckoutSession = async (product) => {\n    return axios.post(`${API_URL}create-checkout-session/`, product, { headers: authHeader() })\n        .then((p) => p.data)\n        .catch((err) => {\n            console.error('Error', err);\n            return err;\n        })\n}\n\n\nexport default {\n    updateProductInfo,\n    createProduct,\n    deleteProduct,\n    getProduct,\n    searchProducts,\n    createCheckoutSession,\n};","import * as React from 'react';\nimport { styled } from '@mui/material/styles';\nimport Typography from '@mui/material/Typography';\nimport { Card, CardActionArea, CardContent, CardMedia } from '@mui/material';\nimport { useHistory } from \"react-router-dom\";\n\n\nconst lorem = \"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.\"\n\nconst ImgCardMedia = styled(CardMedia)({\n  margin: 'auto',\n  display: 'block',\n  maxWidth: '100%',\n  maxHeight: '100%',\n});\n\nconst Text = styled(Typography)({\n  textAlign: 'center'\n})\n\nexport default function ProductPreview({ product }) {\n  const history = useHistory();\n\n  const parseImage = () => {\n    try {\n      return JSON.parse(product.image)\n    } catch (error) {\n      return {}\n    }\n  }\n  const image = parseImage();\n\n  const handleClick = () => history.push(`/market/${product?.id}`);\n  return (\n    <Card sx={{ width: '100%' }}>\n      <CardActionArea onClick={handleClick}>\n        <ImgCardMedia\n          component=\"img\"\n          height=\"200\"\n          image={image?.thumb?.url || 'https://www.medstartr.com/main/images/no-image.png'}\n          alt={product.name}\n        />\n        <CardContent>\n          <Text gutterBottom variant=\"h5\" component=\"div\">\n            {product?.name}\n          </Text>\n          <Text variant=\"body2\" color=\"text.secondary\">\n            {`$${product.deposit} CAD Deposit`}\n          </Text>\n        </CardContent>\n      </CardActionArea>\n    </Card>\n  );\n}","\nimport { useLocation } from \"react-router\";\nexport const useQuery = () => new URLSearchParams(useLocation().search);\n\nexport default useQuery;","import React, { useState } from 'react'\nimport Paper from '@mui/material/Paper';\nimport InputBase from '@mui/material/InputBase';\nimport Divider from '@mui/material/Divider';\nimport IconButton from '@mui/material/IconButton';\nimport SearchIcon from '@mui/icons-material/Search';\n\n//SearchBar component from MUI (did not want to use the lab(beta components) version so took their ecample)\nexport default function SearchBar({ onSearch }) {\n    const [value, setValue] = useState(\"\");\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        onSearch(value);\n    }\n\n    return (\n        <Paper\n            component=\"form\"\n            onSubmit={handleSubmit}\n            sx={{ p: '2px 4px', display: 'flex', alignItems: 'center', width: '100%' }}\n        >\n            <InputBase\n                sx={{ ml: 1, flex: 1 }}\n                placeholder=\"Search Marketplace\"\n                inputProps={{ 'aria-label': 'Search Tattoos' }}\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n\n            />\n            <IconButton sx={{ p: '10px' }}\n                aria-label=\"search\"\n                onClick={handleSubmit}\n            >\n                <SearchIcon />\n            </IconButton>\n            <Divider sx={{ height: 28, m: 0.5 }} orientation=\"vertical\" />\n        </Paper>\n    )\n}\n","import React, { useEffect, useState } from 'react'\nimport { Grid, Typography } from '@mui/material';\nimport {\n    useLocation,\n    useHistory,\n} from \"react-router-dom\";\nimport ProductPreview from './ProductPreview';\nimport productService from '../services/product.service';\nimport SearchBar from './SearchBar';\nimport useQuery from '../common/useQuery';\n\nexport default function Marketplace() {\n    const [products, setProducts] = useState([]);\n    const [fetched, setFetched] = useState(false)\n    let query = useQuery();\n    let history = useHistory();\n    let location = useLocation();\n\n    useEffect(() => {\n        if (!fetched) {\n            let search = query.get('search');\n            if (!search) {\n                search = \" \"\n            }\n            productService.searchProducts(`search=${search}`)\n                .then((p) => setProducts(p))\n                .then(() => setFetched(true))\n        }\n\n\n    }, [fetched])\n\n    const updateSearch = (value) => {\n        const params = new URLSearchParams({ search: value });\n        history.replace({ pathname: location.pathname, search: params.toString() });\n        setFetched(false);\n    }\n\n    return (\n        <Grid container spacing={1}>\n            <Grid item xs>\n                <SearchBar onSearch={updateSearch} />\n            </Grid>\n            <Grid container item xs={12} spacing={1}>\n                {\n                    // query.get('search')\n                    (!products || (typeof products === 'object' && !products.length)) ?\n                        <Typography variant=\"subtitle2\"> No Results Found! </Typography>\n                        :\n                        products.map((p) =>\n                            <Grid key={p?.id} item xs={12} sm={6} md={4}>\n                                <ProductPreview key={`Product-${p?.id}`} product={p} />\n                            </Grid>\n                        )\n                }\n            </Grid>\n        </Grid>\n    )\n}\n"],"sourceRoot":""}